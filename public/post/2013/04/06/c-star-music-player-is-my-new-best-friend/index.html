<!doctype html>

<html lang="en-us">

<head>
  <title>My New Hugo Site</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="The HTML5 Herald" />
  <meta name="author" content="" /><meta name="generator" content="Hugo 0.60.1" />
    

  <meta property="og:title" content="escaping the tar pit" />
<meta property="og:description" content="If you don&#39;t know by now, I&#39;m sort of a personal efficiency maven. I don&#39;t like to waste keystrokes, I&#39;m always experimenting with different key bindings and shortcuts, and I feel almost personally offended when I see someone reach for their mouse to click a button that I know has a keyboard equivalent.
But this isn&#39;t about my pet peeves; this is about tuning yourself in to the improvements you can make on a daily basis that will increase your lifetime efficiency dramatically." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/post/2016/04/07t064259/0400/escaping-the-tar-pit/" />
<meta property="article:published_time" content="2016-04-07T06:42:59-04:00" />
<meta property="article:modified_time" content="2016-04-07T06:42:59-04:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="escaping the tar pit"/>
<meta name="twitter:description" content="If you don&#39;t know by now, I&#39;m sort of a personal efficiency maven. I don&#39;t like to waste keystrokes, I&#39;m always experimenting with different key bindings and shortcuts, and I feel almost personally offended when I see someone reach for their mouse to click a button that I know has a keyboard equivalent.
But this isn&#39;t about my pet peeves; this is about tuning yourself in to the improvements you can make on a daily basis that will increase your lifetime efficiency dramatically."/>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" />
  <script src="https://kit.fontawesome.com/b76b73e8e8.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  <link rel="stylesheet" type="text/css" href="/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="/">My New Hugo Site</a>
            </h1>

      <ul id="social-media">
      </ul>
      
    </header>

    
<nav>
    <ul>
        
    </ul>
</nav>

    <main>




<article>

    <h1>c star music player is my new best friend</h1>

    
        <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2013-04-06T00:00:00Z">Apr 6, 2013</time>
        </li>
        

        

        <li>5 minutes read</li>
    </ul>
</aside>

    

    <p>Have you heard of C * Music Player, also commonly abbreviated as its command
name, <code>cmus</code>? If you haven't, you're potentially missing out on your new
favorite music player (at least, since WinAmp 2.x; ahhh, those were the days).</p>
<p>C * Music Player is for UNIX-like OSes, which essentially means Linux and OS
X. You can usually grab it through your package manager of choice (<code>apt</code> in
Debian-based Linuxes, Homebrew in OS X).</p>
<p>It looks a little like this:</p>
<p>{% img /images/uploads/cmus-cmus_screenshot.png %}</p>
<p>That's <code>cmus</code> running in a tmux session in iTerm 2, using the Zenburn color
theme that now ships along with it (finally).</p>
<p>You might be thinking, &ldquo;Ugh, a terminal-based music player? How limiting.&rdquo; Not
so. What if I told you that you could have global keyboard shortcuts and Growl
notifications? Well, you can (at least in OS X). I'll tell you how.
<del>MORE</del></p>
<p><em>Full disclosure</em>: in order to get global hotkeys working in OS X, you need
the Alfred Powerpack, which is not free. Alfred is an amazing launcher
utility, faster and more awesome than Quicksilver and Butler. Seriously, you
should try it, it's free. If you like it, you can buy the Powerpack and follow
my instructions below to learn how use it to control lots of other things.</p>
<p>The Alfred Powerpack includes &ldquo;workflows,&rdquo; a super-powerful visual
scripting capability that can probably make a lot of things easier for you in
the long run. I recommend supporting these guys, they make good stuff.</p>
<p>That said, if you are in a Linuxy type of environment, there will be some
other way to create global keyboard shortcuts (in Xmonad you can plop them
right into your <code>~/.xmonad/xmonad.hs</code>, for which there is massive amounts of
documentation), but I'm not going to get into any of that in this article.</p>
<p>Even in OS X there are probably other ways, such as Quicksilver. What you need
is the ability to bind a global keyboard shortcut to a <em>terminal script
execution</em>, or a command, to put it simply.</p>
<h2 id="yay-sockets">Yay, sockets!</h2>
<p><code>cmus</code>, by default, starts listening for remote control commands on a <em>UNIX
socket</em> called, appropriately, <code>~/.cmus/socket</code>. UNIX sockets are awesome,
even better than named pipes. So how does this help you to reach <code>cmus</code>
nirvana? Through a little included utility predictably named <code>cmus-remote</code>.
You can already see where this is going.</p>
<p>What we're going to do is wire up an Alfred workflow to listen for a key press
like Control-Command-X and tell <code>cmus</code> to begin playing, then also print out
and grep the current artist and track name, and send that along to Growl so
that it displays what it's doing in the corner of the screen. Perfect.</p>
<p>Here is what the workflow looks like for the &ldquo;play&rdquo; command:</p>
<p>{% img center /images/uploads/cmus-alfred_workflow.png %}</p>
<p>It's the &ldquo;Run Script&rdquo; step that's interesting. Here is the script we're
running:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/usr/local/bin/cmus-remote -p <span style="color:#f92672">&amp;&amp;</span> echo <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>/usr/local/bin/cmus-remote -Q | 
/usr/bin/grep <span style="color:#e6db74">&#39;tag artist&#39;</span> | /usr/bin/cut -d<span style="color:#e6db74">&#39; &#39;</span> -f3-<span style="color:#66d9ef">)</span><span style="color:#e6db74"> - 
</span><span style="color:#e6db74"></span><span style="color:#66d9ef">$(</span>/usr/local/bin/cmus-remote -Q | /usr/bin/grep <span style="color:#e6db74">&#39;tag title&#39;</span> | /usr/bin/cut -d<span style="color:#e6db74">&#39; 
</span><span style="color:#e6db74">&#39;</span> -f3-<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>Evidently the <code>/bin/bash</code> environment that Alfred executes scripts within does
not have any path configured, so I've had to put in the full paths to each
utility, but that's not a big deal. Let me break down for you what's happening
here.</p>
<p>First, we execute <code>cmus-remote -p</code>, which tells <code>cmus</code> to begin playing.</p>
<p>Next, echo the output of two sub-shell commands:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cmus-remote -Q | grep <span style="color:#e6db74">&#39;tag artist&#39;</span> | cut -d<span style="color:#e6db74">&#39; &#39;</span> -f3-
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cmus-remote -Q | grep <span style="color:#e6db74">&#39;tag title&#39;</span> | cut -d<span style="color:#e6db74">&#39; &#39;</span> -f3-
</code></pre></div><p>Each command first runs <code>cmus-remote -Q</code>, which outputs the current status of
<code>cmus</code>, including the currently playing track and so on. I use <code>grep</code> to find
the line I'm looking for, which looks like <code>tag artist Artist Name</code> and use
the <code>cut</code> command to get just the artist name itself.</p>
<p>With <code>cut -d' '</code> I am specifying that the field delimiter is a space, and then
I'm asking for fields three through to the end (the trailing hyphen means
&ldquo;all following fields&rdquo;).</p>
<p>I then separate the output of each with a hyphen by using this bash construct:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>first command<span style="color:#66d9ef">)</span><span style="color:#e6db74"> - </span><span style="color:#66d9ef">$(</span>second command<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>It's a very helpful little trick to know. This results in an output like
&ldquo;Artist Name - Track Name&rdquo;.</p>
<p>Then, I set up the Growl notification step in the workflow to actually include
the previous command output in the message, which in Alfred you can achieve by
using the special string <code>{query}</code>.</p>
<p>{% img center /images/uploads/cmus-growl_panel.png %}</p>
<p>Now when I press Control-Command-X, <code>cmus</code> begins playing and Alfred helpfully
pops up a Growl notification saying &ldquo;Play (Artist - Track)&quot;. I duplicated this
workflow for each of previous track, next track, pause, and stop. It's
amazing.</p>
<h3 id="ok-but-why">OK, but why?</h3>
<p>Why go through all of this work when you can just use iTunes or something?
There are certainly tons of ways to remote control iTunes with the keyboard,
and in fact, Alfred ships with support for it in its workflows, also.</p>
<p>The answer is&hellip; <code>cmus</code> is fast. It's fast and efficient and handles
searching, organizing, and playing many thousands of tracks so much better
than iTunes. Plus, I can keep it tucked away in tmux where I can get to it by
keyboard when I'm in the middle of doing whatever it is I'm doing&hellip; Like
writing this blog post.</p>
<p>Questions? Comments? That's what the form at the bottom of the page is for. Go
for it.</p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="http://example.org/post/2013/03/16/configure-your-old-airport-express-in-mountain-lion/"><i class="fa fa-chevron-circle-left"></i> configure your old airport express in mountain lion</a>
        </li>
        
        
        <li>
            <a href="http://example.org/post/2013/04/08/why-python-is-your-tooling-language-of-choice/">why python is your tooling language of choice <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
    





</main>
    <footer>
        <h6> |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="http://example.org/index.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="/js/scripts.js"></script>

</body>

</html>

