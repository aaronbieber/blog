<!doctype html>

<html lang="en-us">

<head>
  <title>My New Hugo Site</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="The HTML5 Herald" />
  <meta name="author" content="" /><meta name="generator" content="Hugo 0.60.1" />
    

  <meta property="og:title" content="escaping the tar pit" />
<meta property="og:description" content="If you don&#39;t know by now, I&#39;m sort of a personal efficiency maven. I don&#39;t like to waste keystrokes, I&#39;m always experimenting with different key bindings and shortcuts, and I feel almost personally offended when I see someone reach for their mouse to click a button that I know has a keyboard equivalent.
But this isn&#39;t about my pet peeves; this is about tuning yourself in to the improvements you can make on a daily basis that will increase your lifetime efficiency dramatically." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/post/2016/04/07t064259/0400/escaping-the-tar-pit/" />
<meta property="article:published_time" content="2016-04-07T06:42:59-04:00" />
<meta property="article:modified_time" content="2016-04-07T06:42:59-04:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="escaping the tar pit"/>
<meta name="twitter:description" content="If you don&#39;t know by now, I&#39;m sort of a personal efficiency maven. I don&#39;t like to waste keystrokes, I&#39;m always experimenting with different key bindings and shortcuts, and I feel almost personally offended when I see someone reach for their mouse to click a button that I know has a keyboard equivalent.
But this isn&#39;t about my pet peeves; this is about tuning yourself in to the improvements you can make on a daily basis that will increase your lifetime efficiency dramatically."/>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" />
  <script src="https://kit.fontawesome.com/b76b73e8e8.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  <link rel="stylesheet" type="text/css" href="/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="/">My New Hugo Site</a>
            </h1>

      <ul id="social-media">
      </ul>
      
    </header>

    
<nav>
    <ul>
        
    </ul>
</nav>

    <main>




<article>

    <h1>advanced window management with slate</h1>

    
        <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2016-01-31T18:12:37-05:00">Jan 31, 2016</time>
        </li>
        

        

        <li>5 minutes read</li>
    </ul>
</aside>

    

    <p>I am mildly obsessed with window management. When I ran Linux full-time, I tried
nearly every window management system I could find and ultimately fell in love
with &ldquo;tiling&rdquo; window managers. I used Xmonad for more than a year and then
switched to i3.</p>
<p>I have used a Mac at home for a long time and previously tried Slate and
Spectacle for moving windows around quickly. When I was finally able to get a
Mac at work I refocused my efforts into finding just the right solution.</p>
<p>I was quite happy with Spectacle until a colleague showed me that Slate now
supports Javascript configuration, which makes it possible to do very
sophisticated things. I used that facility to re-implement my favorite feature
of Spectacle: the ability to cycle a window through three different sizes along
one screen edge.</p>
<p>Here I'll show you how it's done. If you don't desperately want to code up your
own Slate system after reading this, I've done something terribly wrong.<del>MORE</del></p>
<h2 id="the-goal">The Goal</h2>
<p>The idea is to have a key binding that, when pressed, will snap the current
window to the left half of the screen. When pressed again, it should resize the
window to one third of the width of the screen, and when pressed a third time,
to two thirds of the width of the screen.</p>
<p>We should also have a key binding that does the same thing for the right side of
the screen.</p>
<h2 id="the-solution">The Solution</h2>
<p>First, you'll need to [download Slate][slate], of course. Create a <code>~/.slate.js</code>
configuration file and you're off to the races.
[slate]: <a href="https://github.com/jigish/slate/">https://github.com/jigish/slate/</a></p>
<p>Now, Slate already supports the resizing operations that we want to do, which
they call &ldquo;bar resize&rdquo; (because the window is shaped like a &ldquo;bar&rdquo; that covers
the screen's entire width or height depending on the requested direction). So
what we need to do is write a function that will cycle a window through each of
them.</p>
<p>How we'll do this is by creating an object in Javascript that maps the process
IDs of windows to a string describing their latest &ldquo;resize state.&rdquo; When the key
is pressed to trigger a resize, we'll either add a new attribute to that object
or cycle the attribute's value to the next state in the sequence.</p>
<p>If the saved state isn't in the sequence associated with the key (e.g. the
window was last resized to the left half but the key pressed is for a right edge
resize), we'll just act as though the key isn't set.</p>
<p>You might want to skim through Slate's [Javascript documentation][slate-js] to
learn how these functions actually work.
[slate-js]: <a href="https://github.com/jigish/slate/wiki/JavaScript-Configs">https://github.com/jigish/slate/wiki/JavaScript-Configs</a></p>
<h3 id="saving-the-state">Saving the State</h3>
<p>We'll save the state of each window in a Javascript object. So, first things
first, create an empty object:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Store current window states.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">windowStates</span> <span style="color:#f92672">=</span> {};
</code></pre></div><h3 id="create-the-operations">Create the Operations</h3>
<p>Now we'll create an operation for each of the resize types that we want to
use. Here are the three left edge operations:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Left screen edge operations.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">leftBarThird</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">S</span>.<span style="color:#a6e22e">op</span>(<span style="color:#e6db74">&#34;push&#34;</span>,
                        {<span style="color:#e6db74">&#34;direction&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;left&#34;</span>,
                         <span style="color:#e6db74">&#34;style&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;bar-resize:screenSizeX/3&#34;</span>});
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">leftBarHalf</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">S</span>.<span style="color:#a6e22e">op</span>(<span style="color:#e6db74">&#34;push&#34;</span>,
                       {<span style="color:#e6db74">&#34;direction&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;left&#34;</span>,
                        <span style="color:#e6db74">&#34;style&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;bar-resize:screenSizeX/2&#34;</span>});
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">leftBarTwoThirds</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">S</span>.<span style="color:#a6e22e">op</span>(<span style="color:#e6db74">&#34;push&#34;</span>,
                            {<span style="color:#e6db74">&#34;direction&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;left&#34;</span>,
                             <span style="color:#e6db74">&#34;style&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;bar-resize:screenSizeX/3*2&#34;</span>});
</code></pre></div><h3 id="create-a-cycle-function">Create a Cycle Function</h3>
<p>Because the left and right cycles are identical, save for the operations and
their names, we'll create a generator function that returns a closure for any
sequence of states.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getCycleStates</span>(<span style="color:#a6e22e">states</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">win</span>) {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">win</span>.<span style="color:#a6e22e">pid</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">windowStates</span> <span style="color:#f92672">&amp;&amp;</span>
            <span style="color:#a6e22e">windowStates</span>[<span style="color:#a6e22e">win</span>.<span style="color:#a6e22e">pid</span>] <span style="color:#f92672">!==</span> <span style="color:#66d9ef">undefined</span> <span style="color:#f92672">&amp;&amp;</span>
            <span style="color:#a6e22e">states</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">windowStates</span>[<span style="color:#a6e22e">win</span>.<span style="color:#a6e22e">pid</span>]) <span style="color:#f92672">!==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> 
           ) {
            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">nextIndex</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">states</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">windowStates</span>[<span style="color:#a6e22e">win</span>.<span style="color:#a6e22e">pid</span>]) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">%</span> <span style="color:#ae81ff">3</span>;
            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">nextState</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">states</span>[<span style="color:#a6e22e">nextIndex</span>];
            <span style="color:#a6e22e">windowStates</span>[<span style="color:#a6e22e">win</span>.<span style="color:#a6e22e">pid</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">nextState</span>;
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#a6e22e">windowStates</span>[<span style="color:#a6e22e">win</span>.<span style="color:#a6e22e">pid</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">states</span>[<span style="color:#ae81ff">0</span>];
        }

        eval(<span style="color:#a6e22e">windowStates</span>[<span style="color:#a6e22e">win</span>.<span style="color:#a6e22e">pid</span>] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;.run()&#39;</span>);
    };
}
</code></pre></div><p>This function is passed an array of states and returns a function that will
cycle through those states when the key it is bound to is pressed. A function
bound to a key must accept one argument, the <em>window object</em> for the focused
window, so the returned closure accepts that argument.</p>
<p>Each string representing the current state will also correspond to one of the
Slate operations, which can be triggered by calling the <code>run()</code> method on
them. In spite of its general evilness, we'll use <code>eval()</code> to do that.</p>
<h3 id="create-the-bindable-cycle-functions">Create the Bindable Cycle Functions</h3>
<p>Now we can call <code>getCycleStates()</code> to generate a bindable function for the left
edge and the right edge sequences of states:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Window cycling functions.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">leftCycleOp</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getCycleStates</span>([<span style="color:#e6db74">&#39;leftBarHalf&#39;</span>,
                                  <span style="color:#e6db74">&#39;leftBarThird&#39;</span>,
                                  <span style="color:#e6db74">&#39;leftBarTwoThirds&#39;</span>]);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">rightCycleOp</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getCycleStates</span>([<span style="color:#e6db74">&#39;rightBarHalf&#39;</span>,
                                   <span style="color:#e6db74">&#39;rightBarThird&#39;</span>,
                                   <span style="color:#e6db74">&#39;rightBarTwoThirds&#39;</span>]);
</code></pre></div><p>Note, of course, that I didn't include the right edge operations at the
beginning of the post. I'm sure you can extrapolate those for yourself. After
all, that's half the fun of it.</p>
<h3 id="bind-everything">Bind Everything</h3>
<p>Finally, bind those cycle operations to the keys we want to use. For me, I like
to try to use Vim-like keys when I can, so I've bound these to <code>Command-Shift-h</code>
for the left edge and <code>Command-Shift-l</code> for the right edge.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bind the window cycling functions.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">S</span>.<span style="color:#a6e22e">bind</span>(<span style="color:#e6db74">&#39;h:cmd,shift&#39;</span>, <span style="color:#a6e22e">leftCycleOp</span>);
<span style="color:#a6e22e">S</span>.<span style="color:#a6e22e">bind</span>(<span style="color:#e6db74">&#39;l:cmd,shift&#39;</span>, <span style="color:#a6e22e">rightCycleOp</span>);
</code></pre></div><h2 id="ta-daa">Ta Daa!</h2>
<p>That's all there is to it! You could easily expand this to cycle through any
Slate operations you like (screen quarters, different attached monitors, etc.)
or use the principles illustrated here to build other dynamic configurations do
any number of things.</p>
<p>If you do come up with some awesome application for these ideas, please share
it with me!</p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="http://example.org/post/2016/01/30t155904/0500/dig-into-org-mode/"><i class="fa fa-chevron-circle-left"></i> dig into org mode</a>
        </li>
        
        
        <li>
            <a href="http://example.org/post/2016/03/05t163507/0500/playing-tag-in-org-mode/">playing tag in org mode <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
    





</main>
    <footer>
        <h6> |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="http://example.org/index.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="/js/scripts.js"></script>

</body>

</html>

