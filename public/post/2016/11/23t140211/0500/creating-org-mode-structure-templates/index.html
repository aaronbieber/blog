<!doctype html>

<html lang="en-us">

<head>
  <title>My New Hugo Site</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="The HTML5 Herald" />
  <meta name="author" content="" /><meta name="generator" content="Hugo 0.60.1" />
    

  <meta property="og:title" content="escaping the tar pit" />
<meta property="og:description" content="If you don&#39;t know by now, I&#39;m sort of a personal efficiency maven. I don&#39;t like to waste keystrokes, I&#39;m always experimenting with different key bindings and shortcuts, and I feel almost personally offended when I see someone reach for their mouse to click a button that I know has a keyboard equivalent.
But this isn&#39;t about my pet peeves; this is about tuning yourself in to the improvements you can make on a daily basis that will increase your lifetime efficiency dramatically." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/post/2016/04/07t064259/0400/escaping-the-tar-pit/" />
<meta property="article:published_time" content="2016-04-07T06:42:59-04:00" />
<meta property="article:modified_time" content="2016-04-07T06:42:59-04:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="escaping the tar pit"/>
<meta name="twitter:description" content="If you don&#39;t know by now, I&#39;m sort of a personal efficiency maven. I don&#39;t like to waste keystrokes, I&#39;m always experimenting with different key bindings and shortcuts, and I feel almost personally offended when I see someone reach for their mouse to click a button that I know has a keyboard equivalent.
But this isn&#39;t about my pet peeves; this is about tuning yourself in to the improvements you can make on a daily basis that will increase your lifetime efficiency dramatically."/>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" />
  <script src="https://kit.fontawesome.com/b76b73e8e8.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  <link rel="stylesheet" type="text/css" href="/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="/">My New Hugo Site</a>
            </h1>

      <ul id="social-media">
      </ul>
      
    </header>

    
<nav>
    <ul>
        
    </ul>
</nav>

    <main>




<article>

    <h1>creating org mode structure templates</h1>

    
        <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2016-11-23T14:02:11-05:00">Nov 23, 2016</time>
        </li>
        

        

        <li>5 minutes read</li>
    </ul>
</aside>

    

    <p>Hopefully you already know that you can insert common markup blocks in Org Mode
by entering a prefix like <code>&lt;s</code> and pressing <code>&lt;M-TAB&gt;</code>. Org Mode publicly calls
these &ldquo;Easy Templates&rdquo; but internally calls them &ldquo;structure templates.&rdquo; I wanted
to be able to insert a couple of other common Org-specific blocks, so I figured
out how to add my own. <del>MORE</del></p>
<p>Org Mode supports a few &ldquo;blocks,&rdquo; which you can read about beginning on the
<a href="http://orgmode.org/manual/Blocks.html">Blocks page</a> of the Org documentation.</p>
<p>For example, if you want to insert a block of Emacs Lisp code into an Org
document, you would write a block that looks like this:</p>
<pre><code>#+BEGIN_SRC emacs-lisp
(defun org-xor (a b)
    &quot;Exclusive or.&quot;
    (if a (not b) b))
#+END_SRC
</code></pre><p>It can be hard to remember, and tedious to type, the <code>#+BEGIN_SRC</code> bit, so Org
includes this expansion capability that it refers to in its documentation as
<a href="http://orgmode.org/manual/Easy-Templates.html">Easy Templates</a>, but that is referred to in its source code as
&ldquo;structure templates.&rdquo;</p>
<p>Getting straight to the point, I use the export features of Org Mode quite
often, especially export to HTML (mostly for pasting into other formatted
mediums such as email) and LaTeX/Beamer (for quick one-off slide decks). I
usually write content directly into my &ldquo;notes&rdquo; file and then export a single
subtree.</p>
<p>Exporting a subtree is very easy, simply trigger export with <code>C-c C-e</code>, toggle
&ldquo;export subtree&rdquo; on with <code>C-s</code>, and press the appropriate export format buttons,
like <code>h o</code> for &ldquo;export as HTML and open in the default browser.&rdquo;</p>
<p>{% infobox %}
If you're a pro like me, you have set <code>org-export-initial-scope</code> to <code>subtree</code> so
that you can skip the second step.
{% endinfobox %}</p>
<p>Let's take HTML as an example. The default export settings when you export to
HTML are crude at best. For one thing, the title of the document will be the
subtree's title, which is not always what you want. Worse, the filename of the
HTML file will be the filename of the <em>entire file</em> the subtree is in. So
essentially I wound up with a <code>notes.org.html</code> over and over.</p>
<p>You can fix that by adding some export options, and for subtree exports you put
those into a property drawer. For me, that looks like this:</p>
<pre><code>* Test Subtree Export
  :PROPERTIES:
  :EXPORT_FILE_NAME: actually-use-this-filename
  :EXPORT_TITLE: My Fascinating HTML Export
  :EXPORT_OPTIONS: toc:nil html-postamble:nil num:nil
  :END:
</code></pre><p>In this workflow there are two things that are annoying:</p>
<ol>
<li>
<p>I hate typing out <code>:PROPERTIES:</code>, and I use property drawers a lot. There is
an Org function for this (<code>org-insert-property-drawer</code>), but I'm running out
of good key bindings so I didn't want to make another one for this.</p>
</li>
<li>
<p>I'm not going to be able to memorize the precise format of all of my HTML
export settings, let alone <code>toc:nil html-postamble:nil num:nil</code>.</p>
</li>
</ol>
<p>This is where a structure template comes in handy.</p>
<h2 id="the-goal">The Goal</h2>
<p>The goal is to be able to type something like <code>&lt;p</code> and press <code>&lt;TAB&gt;</code> to insert
the property drawer, and then something like <code>&lt;eh</code> (for <strong>e</strong>xport <strong>h</strong>tml) and
press <code>&lt;TAB&gt;</code> to insert my default HTML export options.</p>
<p>{% infobox %}
Structure templates are inserted as part of the <code>org-cycle</code> function, and so I
have bound <code>org-cycle</code> to <code>&lt;TAB&gt;</code> in my config. If <code>&lt;TAB&gt;</code> doesn't work for you,
but <code>&lt;M-TAB&gt;</code> does, this is probably why.
{% endinfobox %}</p>
<p>On the <a href="http://orgmode.org/manual/Easy-Templates.html">Easy Templates</a> manual page, it says:</p>
<blockquote>
<p>You can install additional templates by customizing the variable
<code>org-structure-template-alist</code>. See the docstring of the variable for
additional details.</p>
</blockquote>
<p>So this should be easy, we just need to add a new value to this list.</p>
<h2 id="create-a-new-template">Create a New Template</h2>
<p>The format of <code>org-structure-template-alist</code> is like this (abridged):</p>
<pre><code>((&quot;s&quot; &quot;#+BEGIN_SRC ?\n\n#+END_SRC&quot; &quot;&lt;src lang=\&quot;?\&quot;&gt;\n\n&lt;/src&gt;&quot;)
 (&quot;e&quot; &quot;#+BEGIN_EXAMPLE\n?\n#+END_EXAMPLE&quot; &quot;&lt;example&gt;\n?\n&lt;/example&gt;&quot;)
 (&quot;q&quot; &quot;#+BEGIN_QUOTE\n?\n#+END_QUOTE&quot; &quot;&lt;quote&gt;\n?\n&lt;/quote&gt;&quot;)
 ...)
</code></pre><p>This is an <em>association list</em> so each element of the outer list is a list with
at least two elements. The first element is the letter to follow <code>&lt;</code> in your
template expansion trigger. The second element is the template itself, with a
<code>?</code> where the cursor should wind up at the end.</p>
<p>Most of the defaults have a third value, which is an &ldquo;Emacs Muse&rdquo;-style
template. Muse is some kind of authoring system for Emacs that I know nothing
about and don't care about. You don't need a third element for this to work, so
just ignore it.</p>
<p>Cool, so we just add a new element to this list defining our template. Let's do
the <code>:PROPERTIES:</code> one:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cl" data-lang="cl">(add-to-list <span style="color:#e6db74">&#39;org-structure-template-alist</span>
             (<span style="color:#a6e22e">list</span> <span style="color:#e6db74">&#34;p&#34;</span> (concat <span style="color:#e6db74">&#34;:PROPERTIES:\n&#34;</span>
                               <span style="color:#e6db74">&#34;?\n&#34;</span>
                               <span style="color:#e6db74">&#34;:END:&#34;</span>)))
</code></pre></div><p>{% infobox %}
Note that I am using the <code>list</code> function rather than a quoted list because I
need Emacs to evaluate the return value of the <code>concat</code> function within the
list. I am only using <code>concat</code> here to make the code more legible because the
template string is multiple lines long. I like pretty code.
{% endinfobox %}</p>
<p>You can evaluate this expression by placing your cursor outside of the last
closing parenthesis and calling <code>eval-last-sexp</code> (which I have bound to <code>C-RET</code>
for just such an occasion).</p>
<p>Once you have evaluated that expression, the template should work right away!
Open an Org file, enter <code>&lt;p</code> on its own line, and hit <code>&lt;M-TAB&gt;</code> (or <code>&lt;TAB&gt;</code> if
you bound <code>org-cycle</code> to it as I have).</p>
<h2 id="but-longer-shortcuts-though">But Longer Shortcuts Though?</h2>
<p>If you read the source code of the function <code>org-try-structure-completion</code>, you
will notice that the regular expression will match <em>one or more letters</em>, so
even though Org only ships with one-letter expansion triggers, you can create
longer ones if you want to.</p>
<p>Here is my HTML export options template:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cl" data-lang="cl">(add-to-list <span style="color:#e6db74">&#39;org-structure-template-alist</span>
             (<span style="color:#a6e22e">list</span> <span style="color:#e6db74">&#34;eh&#34;</span> (concat <span style="color:#e6db74">&#34;:EXPORT_FILE_NAME: ?\n&#34;</span>
                                <span style="color:#e6db74">&#34;:EXPORT_TITLE:\n&#34;</span>
                                <span style="color:#e6db74">&#34;:EXPORT_OPTIONS: toc:nil html-postamble:nil num:nil&#34;</span>)))
</code></pre></div><p>Now I can do <code>&lt;p&lt;TAB&gt;</code> and then immediately <code>&lt;eh&lt;TAB&gt;</code> and I'm all ready to add
a filename and a title and export this subtree to HTML!</p>
<p>Have any bright ideas for new Org Mode structure templates? Leave them in the
comments below!</p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="http://example.org/post/2016/09/25t112859/0400/agenda-interactions-primer/"><i class="fa fa-chevron-circle-left"></i> agenda interactions primer</a>
        </li>
        
        
        <li>
            <a href="http://example.org/post/2016/11/24t085724/0500/org-capture-from-anywhere-on-your-mac/">org capture from anywhere on your mac <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
    





</main>
    <footer>
        <h6> |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="http://example.org/index.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="/js/scripts.js"></script>

</body>

</html>

