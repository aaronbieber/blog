<!doctype html>

<html lang="en-us">

<head>
  <title>My New Hugo Site</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="The HTML5 Herald" />
  <meta name="author" content="" /><meta name="generator" content="Hugo 0.60.1" />
    

  <meta property="og:title" content="escaping the tar pit" />
<meta property="og:description" content="If you don&#39;t know by now, I&#39;m sort of a personal efficiency maven. I don&#39;t like to waste keystrokes, I&#39;m always experimenting with different key bindings and shortcuts, and I feel almost personally offended when I see someone reach for their mouse to click a button that I know has a keyboard equivalent.
But this isn&#39;t about my pet peeves; this is about tuning yourself in to the improvements you can make on a daily basis that will increase your lifetime efficiency dramatically." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/post/2016/04/07t064259/0400/escaping-the-tar-pit/" />
<meta property="article:published_time" content="2016-04-07T06:42:59-04:00" />
<meta property="article:modified_time" content="2016-04-07T06:42:59-04:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="escaping the tar pit"/>
<meta name="twitter:description" content="If you don&#39;t know by now, I&#39;m sort of a personal efficiency maven. I don&#39;t like to waste keystrokes, I&#39;m always experimenting with different key bindings and shortcuts, and I feel almost personally offended when I see someone reach for their mouse to click a button that I know has a keyboard equivalent.
But this isn&#39;t about my pet peeves; this is about tuning yourself in to the improvements you can make on a daily basis that will increase your lifetime efficiency dramatically."/>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" />
  <script src="https://kit.fontawesome.com/b76b73e8e8.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  <link rel="stylesheet" type="text/css" href="/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="/">My New Hugo Site</a>
            </h1>

      <ul id="social-media">
      </ul>
      
    </header>

    
<nav>
    <ul>
        
    </ul>
</nav>

    <main>




<article>

    <h1>playing tag in org mode</h1>

    
        <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2016-03-05T16:35:07-05:00">Mar 5, 2016</time>
        </li>
        

        

        <li>5 minutes read</li>
    </ul>
</aside>

    

    <p>Once you have achieved <em>Org Mode Nirvana</em> (hopefully with the help of my
previous post, [Dig into Org Mode]({% post_url 2016-01-30-dig-into-org-mode %}))
and you have over 2,500 lines of Org notes and TODO lists as I do (I'm serious;
see the screenshot below), you'll want to seriously up your agenda game so that
you can find stuff quickly.</p>
<p>{% img noborder /images/uploads/playing-tag-in-org-mode/2500-org-files.png %}</p>
<p>One way to collate related information across Org files is by using tags. I'm
not a tagging expert, but I'll tell you what I know.<del>MORE</del></p>
<p>Tags are not a new concept so I won't bother to explain the fundamental concept
of the tag. I use tags to classify certain important items in my notes and TODO
lists so that I can later pull up a list of all of those items together when I
need to find one (or when I want to see a cross-section of data).</p>
<p>A tag in Org Mode is just a word surrounded by colons, appearing on the same
line as the item's headline. Multiple tags are separated by colons, and tags
can only contain letters, numbers, underscores, and &ldquo;at&rdquo; symbols (no spaces!)
Tags look like this:</p>
<pre><code>* Ideas for office parties              :party:brainstorm:
</code></pre><h2 id="applying-tags">Applying Tags</h2>
<p>To apply tags to an Org item interactively, call <code>org-set-tags-command</code>.</p>
<p>If you use Helm (which you <em>really should</em>), you'll get a lovely completing read
window containing tags you've already used so that you can be consistent in your
tagging (that's really the most important thing).</p>
<p>What you'll notice when you start using <code>org-set-tags-command</code> is that you don't
get a great completion menu after the first tag, because the tags string is
treated as a single value and Helm wants to complete based on the full value. In
other words, with the tag <code>:party:</code> already assigned, triggering
<code>org-set-tags-command</code> gives you a tag prompt pre-populated with <code>:party:</code>
rather than letting you choose another separate tag to add.</p>
<p>That just won't do, so let's fix it. I created these small functions that will
allow you to choose a tag from all available tags and if that tag is not applied
to the current headline, it will add it, otherwise (if the tag you select is
already there), it will remove it.</p>
<p>This first function is meant for internal use only (note the double hyphen after
my &ldquo;air&rdquo; namespace prefix). Calling this function while point is resting on an
Org headline will replace the headline's tags with the tags string given. If
<code>nil</code> is passed, any tags will be removed.</p>
<p>Right at the end I call <code>(org-set-tags t)</code> to re-align the tags based on your
configuration. The <code>t</code> argument means &ldquo;align only.&rdquo;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cl" data-lang="cl">(defun air--org-swap-tags (tags)
  <span style="color:#e6db74">&#34;Replace any tags on the current headline with TAGS.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">The assumption is that TAGS will be a string conforming to Org Mode&#39;s
</span><span style="color:#e6db74">tag format specifications, or nil to remove all tags.&#34;</span>
  (<span style="color:#66d9ef">let</span> ((old-tags (org-get-tags-string))
        (tags (<span style="color:#66d9ef">if</span> tags
                  (concat <span style="color:#e6db74">&#34; &#34;</span> tags)
                <span style="color:#e6db74">&#34;&#34;</span>)))
    (save-excursion
      (beginning-of-line)
      (re-search-forward
       (concat <span style="color:#e6db74">&#34;[ \t]*&#34;</span> (regexp-quote old-tags) <span style="color:#e6db74">&#34;[ \t]*$&#34;</span>)
       (line-end-position) <span style="color:#66d9ef">t</span>)
      (replace-match tags)
      (org-set-tags <span style="color:#66d9ef">t</span>))))
</code></pre></div><p>This function is the real meat and potatoes; it gives you a completing read of
all tags in the global tags table (which it also updates) and adds or removes
the tag as necessary.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cl" data-lang="cl">(defun air-org-set-tags (tag)
  <span style="color:#e6db74">&#34;Add TAG if it is not in the list of tags, remove it otherwise.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">TAG is chosen interactively from the global tags completion table.&#34;</span>
  (interactive
   (<span style="color:#a6e22e">list</span> (<span style="color:#66d9ef">let</span> ((org-last-tags-completion-table
                (<span style="color:#66d9ef">if</span> (derived-mode-p <span style="color:#e6db74">&#39;org-mode</span>)
                    (org-uniquify
                     (delq <span style="color:#66d9ef">nil</span> (<span style="color:#a6e22e">append</span> (org-get-buffer-tags)
                                       (org-global-tags-completion-table))))
                  (org-global-tags-completion-table))))
           (org-icompleting-read
            <span style="color:#e6db74">&#34;Tag: &#34;</span> <span style="color:#e6db74">&#39;org-tags-completion-function</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">nil</span>
            <span style="color:#e6db74">&#39;org-tags-history</span>))))
  (<span style="color:#66d9ef">let*</span> ((cur-list (org-get-tags))
         (new-tags (mapconcat <span style="color:#e6db74">&#39;identity</span>
                              (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">member</span> tag cur-list)
                                  (<span style="color:#a6e22e">delete</span> tag cur-list)
                                (<span style="color:#a6e22e">append</span> cur-list (<span style="color:#a6e22e">list</span> tag)))
                              <span style="color:#e6db74">&#34;:&#34;</span>))
         (new (<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">&gt;</span> (<span style="color:#a6e22e">length</span> new-tags) <span style="color:#ae81ff">1</span>) (concat <span style="color:#e6db74">&#34; :&#34;</span> new-tags <span style="color:#e6db74">&#34;:&#34;</span>)
                <span style="color:#66d9ef">nil</span>)))
    (air--org-swap-tags new)))
</code></pre></div><p>I use Evil Leader (naturally) and have mapped this to my <code>&lt;leader&gt;t</code>, which, for
me, is <code>,t</code>.</p>
<p>Once you have applied some tags to headlines in your Org files, you can take
advantage of the agenda's tag search capabilities.</p>
<h2 id="searching-for-tags">Searching for Tags</h2>
<p>Typically you would simply call <code>org-agenda</code> and then press <code>m</code> to select &ldquo;Match
a TAGS/PROP/TODO query,&rdquo; which is essentially a tag search. I search for tags
pretty often, so I created a binding directly to the underlying function, which
is <code>org-tags-view</code>.</p>
<p>As I mentioned in my previous Org posts, I have a common prefix key of <code>C-c t</code>
for all of my TODO-related activities. For searching I decided to create a new
base key, <code>C-c f</code> (&ldquo;f&rdquo; for &ldquo;find&rdquo;). Admittedly I'm running out of great
mnemonics that aren't already used by other functions, but such is life in the
fast lane of Emacs customization.</p>
<p>I also search by keyword frequently so I've assigned <code>C-c f t</code> to search for
tags and <code>C-c f k</code> to search for keywords. I'm not in love with <code>C-c f t</code>
because on the QWERTY keyboard they're all in a row, but until I come up with
something different that I can remember I'm rolling with it.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Tags are a convenient and powerful way to link pieces of information together in
Org Mode; by applying tags carefully you can &ldquo;slice and dice&rdquo; your notes in
useful ways to get an overview of individual topics or keep track of how often
you think about certain things. The sky's the limit.</p>
<p>Full disclosure: it wasn't until I sat down to write this that I realized how
much adding and removing tags sucks and wrote the functions shown above. They're
probably buggy as hell, so let me know if you use them and run into trouble. I'd
also accept pull requests if you feel saucy.</p>
<p>You can <a href="https://github.com/aaronbieber/dotfiles/blob/master/configs/emacs.d/lisp/init-org.el">view my full Org Mode configuration file here</a>.</p>
<p>As always, drop a comment below if you have questions or wish to praise me
endlessly.</p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="http://example.org/post/2016/01/31t181237/0500/advanced-window-management-with-slate/"><i class="fa fa-chevron-circle-left"></i> advanced window management with slate</a>
        </li>
        
        
        <li>
            <a href="http://example.org/post/2016/04/07t064259/0400/escaping-the-tar-pit/">escaping the tar pit <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
    





</main>
    <footer>
        <h6> |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="http://example.org/index.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="/js/scripts.js"></script>

</body>

</html>

